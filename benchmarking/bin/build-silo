#!/bin/bash
set -meuo pipefail
IFS=

cd ..

set -x

case "$BUILD" in
    Release)
        make build/Release/silo
        ;;
    Debug)
        make build/Debug/silo
        ;;
    *)
        echo "invalid BUILD value '$BUILD'"
        exit 1
esac

# `ln` works, too, currently (the SILO build does not overwrite the
# original file in place), but it's dicey, so better use 'cp'
cp build/"$BUILD"/silo{,_"$COMMIT_ID"}
